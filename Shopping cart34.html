<!doctype html>
<html>
<head>
<title></title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>
<h1>Shooping cart</h1>
<div>
<ul>
<li><a class="add-to-cart" href="#" data-name="Apple" data-price="1.22">Apple $1.22</a></li>
<li><a class="add-to-cart" href="#" data-name="Banana" data-price="1.33">Banana $1.33</a></li>
<li><a class="add-to-cart" href="#" data-name="Chocolate" data-price="4.99">Chocolate $4.99</a></li>
<li><a class="add-to-cart" href="#" data-name="Icecream" data-price="5.00">Icecream $5.00</a></li>
</ul>
<button>clear cart</button>
</div>
<div>
<ul id="show-cart">
</ul>
<div id="total-cart"></div>
</div>
<script>
$(".add-to-cart").click(function(event){
   event.preventDefault();
    var name = $(this).attr("data-name");
	var price = Number($(this).attr("data-price"));
	addItemToCart(name, price, 1);
	displayCart();
	});
	
function displayCart(){
console.log("***Display Cart***");
    var cartArray = listCart();
	console.log("***Count Cart :"+cartArray.length);
	var output = "";
	for (var i in cartArry){
	     output +="<li>"+cartArray[i].name+""+cartArray[i].count+"</li>"
		 }
		 $("#show-cart").html(output);
}
 
var cart = [];
var Item = function (name, price, count) {
this.name = name
this.price = price
this.count = count
};
function addItemToCart(name, price, count){
 for (var i in cart){
      if (cart[i].name === name){
	       cart[i].count += count;
		   return;
    }
}
var item = new Item(name, price, count);
cart.push(item);
saveCart();
}
function removeItemFromCart(name){
for (var i in cart) {}
      if (cart[i].name === name){
	      cart[i].count --;
		  if (cart[i].count === 0){
		       cart.splice(i,1);
		  }
		  break;
	  }
	
       saveCart();
 }
	function removeItemFromCartAll(name)
    for (var i in cart){
	     if (cart[i].name === name){
		   cart.splice(i, 1);
	          
			   break;
			  }
	}
     saveCart();
	}
function clearCart(){
        cart = [];
		saveCart();
		}
	


console.log (cart.length);
console.log(cart);

removeItemFromCartAll("banana");

console.log(cart.length);
console.log(cart);

function clearCart(){
       cart = [];
	   saveCart();
	   }
	  
	   function countCart() {
	      for (var i in cart){
		  var totalCount = 0;
		  for (var i in cart){
		       totalCount += cart[i].count;
			   }
			   return totalCount;
		  }
	   console.log( countcart());
	   function totalCart()
	   var totalCost = 0;
	   for (var i in cart){
	        totalCost += cart[i].price;
			}
			return totalCost;
	   
	   }
	   function listCart(){
	    var cartCopy = [];
		for (var i in cart){
		      var item = cart[i];
			  var itemCopy = {};
			  for (var p in item){
			       itemCopy[p] = item[p];
				   }
				   cartCopy.push(itemCopy);
				   ]
				   return cartCopy;
				   }
				   function saveCart(){
				      localStorage.setItem("shoppingCart", JSON.stringify(cart));
					  }
					  function loadCart(){
					  cart = JSON.parse(localStorage.getItem("shoppingCart"));
					  }
					  loadCart();
					  var array = listCart();
					  console.log("-------------");
					  console.log(array);
	   console.log(array);
	   
</script>
</body>
</html>
